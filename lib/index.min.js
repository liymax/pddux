!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("react"),require("immer")):"function"==typeof define&&define.amd?define(["exports","react","immer"],e):e(t.sudux={},t.React,t.produce)}(this,function(t,p,h){"use strict";p=p&&p.hasOwnProperty("default")?p.default:p,h=h&&h.hasOwnProperty("default")?h.default:h;var v=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},u=function(){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}(),y=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},i=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)},d=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e},m=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],r=!0,o=!1,u=void 0;try{for(var i,a=t[Symbol.iterator]();!(r=(i=a.next()).done)&&(n.push(i.value),!e||n.length!==e);r=!0);}catch(t){o=!0,u=t}finally{try{!r&&a.return&&a.return()}finally{if(o)throw u}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")};t.createProvider=function(l,s,n){return function(t){function f(t){var r=this;v(this,f);var o=d(this,(f.__proto__||Object.getPrototypeOf(f)).call(this,t)),e=l.initState,u=l.reduce;o.state=y({},e);var n,i,a=(n=regeneratorRuntime.mark(function t(e){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:n=h(o.state,function(t){u(t,e)},function(t,e){}),o.setState(n);case 2:case"end":return t.stop()}},t,r)}),i=function(){var a=n.apply(this,arguments);return new Promise(function(u,i){return function e(t,n){try{var r=a[t](n),o=r.value}catch(t){return void i(t)}if(!r.done)return Promise.resolve(o).then(function(t){e("next",t)},function(t){e("throw",t)});u(o)}("next")})},function(t){return i.apply(this,arguments)}),c=function(){return o.state};return o.actions={},Object.entries(s).forEach(function(t){var e=m(t,2),n=e[0],r=e[1];o.actions[n]=r(a,c)}),o}return i(f,t),u(f,[{key:"render",value:function(){var t=n.Provider,e=y({},this.state,this.actions);return p.createElement(t,{value:e},this.props.children)}}]),f}(p.PureComponent)},t.map=function(n){var o=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[];return function(r){return function(t){function e(){return v(this,e),d(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return i(e,t),u(e,[{key:"render",value:function(){var t=n.Consumer;return p.createElement(t,null,function(n){var t=o.reduce(function(t,e){return t[e]=n[e],t},{});return p.createElement(r,t)})}}]),e}(p.Component)}},t.multiMap=function(){var c=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[];return function(a){return function(t){function e(){return v(this,e),d(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return i(e,t),u(e,[{key:"render",value:function(){var o=c.length,u=0,i={};return function t(e){var n=e.mapState,r=e.context.Consumer;return u<o-1?(u++,p.createElement(r,null,function(e){return n.forEach(function(t){return i[t]=e[t]}),t(c[u])})):u===o-1?p.createElement(r,null,function(e){return n.forEach(function(t){return i[t]=e[t]}),p.createElement(a,i)}):void 0}(c[u])}}]),e}(p.Component)}},Object.defineProperty(t,"__esModule",{value:!0})});
